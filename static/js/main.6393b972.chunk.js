(this["webpackJsonpeverybody-loves-fractals"]=this["webpackJsonpeverybody-loves-fractals"]||[]).push([[0],{27:function(e,t,a){e.exports=a(38)},32:function(e,t,a){},33:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(21),c=a.n(r),o=(a(32),a(26)),s=a(9),i=a(10),u=a(12),m=a(11),h=a(13),p=(a(33),a(7)),f=function(e){return l.a.createElement("div",null,l.a.createElement("p",null,"Hello, ",l.a.createElement("strong",null,e.currentUser.username),"."))},d=a(6),E=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),r=a[0],c=a[1],o=e.fractal,s=o.id,i=o.name,u=o.image,m=o.username,h=o.parameters,p=function(){c(!r)},f=function(e){e.target.href=u};return"gallery"===e.context?l.a.createElement("div",{className:"fractal-card"},l.a.createElement("div",{className:"fractal-img-wrapper",onClick:p},!0===r?l.a.createElement("div",{className:"extra-card-info"},l.a.createElement("p",null,l.a.createElement("strong",null,"Theta: "),h.theta),l.a.createElement("p",null,l.a.createElement("strong",null,"Axiom: "),h.rules.axiom),l.a.createElement("p",null,l.a.createElement("strong",null,"Ruleset F: "),h.rules.setF),l.a.createElement("p",null,l.a.createElement("strong",null,"Ruleset G: "),h.rules.setG)):null,l.a.createElement("img",{src:u,alt:i})),l.a.createElement("p",null,l.a.createElement("strong",null,"Name: "),i),l.a.createElement("p",null,l.a.createElement("strong",null,"Created by: "),m),l.a.createElement("a",{className:"download-link",href:"test",download:"".concat(i.replace(/\s+/g,"-").toLowerCase(),".png"),onClick:f},"\u2965 Download as .PNG File"),l.a.createElement("br",null),l.a.createElement("br",null)):"profile"===e.context?l.a.createElement("div",{className:"fractal-card"},l.a.createElement("div",{className:"fractal-img-wrapper",onClick:p},!0===r?l.a.createElement("div",{className:"extra-card-info"},l.a.createElement("p",null,l.a.createElement("strong",null,"Theta: "),h.theta),l.a.createElement("p",null,l.a.createElement("strong",null,"Axiom: "),h.rules.axiom),l.a.createElement("p",null,l.a.createElement("strong",null,"Ruleset F: "),h.rules.setF),l.a.createElement("p",null,l.a.createElement("strong",null,"Ruleset G: "),h.rules.setG)):null,l.a.createElement("img",{src:u,alt:i})),l.a.createElement("p",null,l.a.createElement("strong",null,"Name: "),i),l.a.createElement("a",{className:"download-link",href:"test",download:"".concat(i.replace(/\s+/g,"-").toLowerCase(),".png"),onClick:f},"\u2965 Download as .PNG File"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("button",{className:"delete-btn",onClick:function(){fetch("https://everybody-loves-fractals.herokuapp.com/fractals/".concat(s),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(){return e.handleDeleteFractal(s)}))}},"Delete"),l.a.createElement("br",null),l.a.createElement("br",null)):void 0},b=function(e){var t=e.fractals,a=e.currentUser,n=t.filter((function(e){return e.user_id===a.id}));return l.a.createElement("div",{className:"fractal-card-container"},n.map((function(t){return l.a.createElement(E,{key:t.id,fractal:t,context:"profile",handleDeleteFractal:e.handleDeleteFractal})})))},g=function(e){return l.a.createElement("div",null,l.a.createElement("h2",null,"Profile"),l.a.createElement(f,{currentUser:e.currentUser}),l.a.createElement("h5",null,"Your fractals:"),l.a.createElement(b,{currentUser:e.currentUser,fractals:e.fractals,handleDeleteFractal:e.handleDeleteFractal}))},v=function(){return l.a.createElement("div",{className:"about"},l.a.createElement("h2",null,"Fractals are for lovers."),l.a.createElement("h4",null,"What are Fractals?"),l.a.createElement("p",{className:"about-paragraph"},"I'm glad you asked! Fractals are complex geometric patterns that are defined by self-similarity. In other words, their inner components resemble the whole shape. Due to their recursive nature, they can, essentially, continue indefinitely when magnified. This scaling symmetry lends particularly well to computer generated graphics - which is what we're doing here! There are many purely geometric examples of fractals - a few famous ones are the ",l.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Sierpi%C5%84ski_triangle",target:"_blank",rel:"noopener noreferrer"},"Sierpinski Triangle"),", ",l.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Koch_snowflake",target:"_blank",rel:"noopener noreferrer"},"Koch Snowflake"),", and ",l.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Dragon_curve",target:"_blank",rel:"noopener noreferrer"},"Dragon Curve"),". However, although they ",l.a.createElement("i",null,"technically")," cannot be infinite, fractals also appear in nature. Think of a lightning bolt, a leaf vein, a coastline from above, or a branching tree - see how they resemble a fractal pattern? Such similarities have not gone unnoticed. In fact, it is a perfect segway into our next topic."),l.a.createElement("h4",null,"Our Drawing Instructions: L-Systems"),l.a.createElement("p",{className:"about-paragraph"},"Fractals can be drawn a few different ways, most of which involve recursion. However, we are using the specific method of the Lindenmayer System - or ",l.a.createElement("a",{href:"https://en.wikipedia.org/wiki/L-system",target:"_blank",rel:"noopener noreferrer"},"L-System"),'. What is an L-System? Another fantastic question! First and foremost, it\'s a language system that operates with a specific grammar. It consists of an "alphabet" that is used to write "production rules" that are used to generatively calculate a string of instructions, with a base case that the production rules are initially operated on (the axiom). In the late 1960s, a botanist named Astrid Lindenmayer used L-Systems to describe plant cells, growth processes, and plant development. They are generally fairly simple, compared to what they produce, which is why they are so attractive for the kind of fractal generation we\'re doing here. Here is what they look like at a basic level:',l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"about-rules"},l.a.createElement("b",null,"Alphabet:")," A B",l.a.createElement("br",null),l.a.createElement("b",null,"Axiom:")," A",l.a.createElement("br",null),l.a.createElement("b",null,"Rule 1:"),"A \u2192 ABA",l.a.createElement("br",null),l.a.createElement("b",null,"Rule 2:"),"B \u2192 BB",l.a.createElement("br",null),l.a.createElement("br",null),"n = 0: A",l.a.createElement("br",null),"n = 1: ABA",l.a.createElement("br",null),"n = 3: ABA BB ABA",l.a.createElement("br",null),"n = 4: ABA BB ABA BB BB ABA BB ABA",l.a.createElement("br",null)),l.a.createElement("br",null),"Our L-System, which is quite common for fractal generation, looks like this:",l.a.createElement("div",{className:"about-rules"},l.a.createElement("h5",null,"Terms:"),l.a.createElement("br",null),l.a.createElement("b",null,"\u03b8 Theta:"),"\xa0This refers to the angle the lines turn.",l.a.createElement("br",null),l.a.createElement("b",null,"Length:"),"\xa0This refers to the initial length of the line segment. It decreases with each generation.",l.a.createElement("br",null),l.a.createElement("b",null,"Axiom:"),"\xa0This is the base rule.",l.a.createElement("br",null),l.a.createElement("b",null,"Ruleset F:"),"\xa0For each encounter of 'F', these instructions are appended.",l.a.createElement("br",null),l.a.createElement("b",null,"Ruleset G:"),"\xa0For each encounter of 'G', these instructions are appended.",l.a.createElement("br",null),l.a.createElement("h5",null,"Rule Definitions:"),l.a.createElement("b",null,"F:"),"\xa0Move forward and draw a line.",l.a.createElement("br",null),l.a.createElement("b",null,"G:"),"\xa0Move forward, but do not draw a line.",l.a.createElement("br",null),l.a.createElement("b",null,"+:"),"\xa0Rotate at the angle defined by theta.",l.a.createElement("br",null),l.a.createElement("b",null,"-:"),"\xa0Rotate at the angle opposite of theta.",l.a.createElement("br",null),l.a.createElement("b",null,"[:"),"\xa0Save current state (push)",l.a.createElement("br",null),l.a.createElement("b",null,"]:"),"\xa0Return to saved state (pop)",l.a.createElement("br",null)),l.a.createElement("br",null),"Based on the parameters passed in, we first calculate the string of instructions with a recursive function, and then draw them iteratively onto a canvas."),l.a.createElement("h4",null,"At this time, this application is designed to draw fractal trees."),l.a.createElement("p",{className:"about-paragraph"},"Although all kinds of fractals can be drawn with L-Systems, this implementation of them works best with fractal trees. Due to fractal pattern's irregular scaling rate, we found that this was the most versatile for keeping the drawing on the canvas (we want you to be able to see your lovely fractal creations!). The drawing point is currently fixed, but we hope to make it more dynamic in the future to be able to handle many types of fractals."),l.a.createElement("h4",null,"What was this site built with?"),l.a.createElement("p",null,"For the front end, we're using JavaScript with the React framework and the library of ",l.a.createElement("a",{href:"https://p5js.org/",target:"_blank",rel:"noopener noreferrer"},"P5.js")," for graphics processing. For the back end, we're using Rails as an API. "),l.a.createElement("h5",null,"Special Thanks"),l.a.createElement("p",{className:"about-paragraph"}," Endless thanks to ",l.a.createElement("a",{href:"https://thecodingtrain.com/",target:"_blank",rel:"noopener noreferrer"},"Dan Shiffman"),", for his enthusiasm for graphics processing. He is the reason we were able to implement this in such a short time span (less than 5 days!). Without him, this application would not as shiny as it is. If you are interested, please look into his work - you will not be disappointed!"))},y=a(22),w=a.n(y),k=["#754687","#465a87","#c94f96","#ebaa28","#73a157","#52afb3","#d42f50","#edc234","#ff7340"],F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={initialRender:!1},a.calculateCurrentLen=function(e,t){for(var a=t,n=0;n<e;n++)a*=.5;return a},a.renderCanvas=function(){var e,t=a.props.fractalParams,n=t.n,l=t.theta,r=t.axiom,c=t.initLen,o=t.setF,s=t.setG,i=a.calculateCurrentLen(n,c),u={axiom:r.split(""),setF:o.split(""),setG:[]};s&&(u.setG=u.setG=s.split("")),a.myP5&&(e=a.calculateLSystem(n,u),a.myP5.drawLSystem(e,i,l))},a.calculateLSystem=function(e,t){var n=[];return 1===e||0===e?t.axiom:(a.calculateLSystem(e-1,t).forEach((function(e){if("F"===e)t.setF.forEach((function(e){n.push(e)}));else if("G"===e){t.setG.forEach((function(e){n.push(e)}))}else("+"===e||"-"===e||"["===e||"]"===e)&&n.push(e)})),n)},a.sketch=function(e){e.setup=function(){e.createCanvas(500,500),e.background(255),e.angleMode(e.DEGREES),e.clear()},e.drawLSystem=function(t,a,n){var l=k[Math.floor(Math.random()*k.length)],r=t.length;e.background(255),e.stroke(l),e.resetMatrix(),e.translate(250,500);for(var c=0;c<r;c++){var o=t[c];"F"===o?(e.line(0,0,0,-a),e.translate(0,-a)):"G"===o?e.translate(0,-a):"+"===o?e.rotate(n):"-"===o?e.rotate(-n):"["===o?e.push():"]"===o&&e.pop()}},e.loading=function(){e.clear(),e.background(255),e.circle(250,250,100)},e.draw=function(){}},a.myRef=l.a.createRef(),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.myP5=new w.a(this.sketch,this.myRef.current),this.props.handleCanvasChange(this.myP5.canvas)}},{key:"shouldComponentUpdate",value:function(e){return!this.state.initialRender&&this.myP5._setupDone?(this.setState({initialRender:!0}),!0):e.fractalParams!==this.props.fractalParams}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.myP5._setupDone&&(this.myP5.loading(),setTimeout(this.renderCanvas,1200),this.props.handleCanvasChange(this.myP5.canvas))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"The Fractal Machine"),l.a.createElement("p",null,"Hello. I am the fractal machine. I can make your dreams and nightmares come true."),l.a.createElement("div",{className:"canvas-container",ref:this.myRef}))}}]),t}(l.a.Component),S=function(e){var t=e.fractalParams,a=t.n,r=t.theta,c=t.axiom,o=t.initLen,s=t.setF,i=t.setG,u=e.handleFormSubmit,m=Object(n.useRef)(),h=Object(n.useRef)(),p=Object(n.useRef)(),f=Object(n.useRef)(),d=Object(n.useRef)(),E=Object(n.useRef)();return l.a.createElement("div",{className:"fractal-input-container"},l.a.createElement("h3",null," \u300e Create\u22b6a\u22b7Fractal \u300f "),l.a.createElement("div",{className:"fractal-inputs"},l.a.createElement("form",{className:"fractal-input-form",onSubmit:function(e){u(e,m,h,p,f,d,E)}},l.a.createElement("div",{className:"inner-fractal-inputs-container"},l.a.createElement("label",null,"Axiom:",l.a.createElement("input",{key:c,ref:p,className:"fractal-form-input axiom",type:"text",pattern:"^[FG+\\-[\\]]*$",name:"axiom",placeholder:"Enter an Axiom...",defaultValue:c})),l.a.createElement("label",null,"Rule F:",l.a.createElement("input",{key:s,ref:d,className:"fractal-form-input rule-input",type:"text",pattern:"^[FG+\\-[\\]]*$",name:"ruleF",placeholder:"Enter a first rule...",defaultValue:s})),l.a.createElement("label",null,"Rule G:",l.a.createElement("input",{key:i,ref:E,className:"fractal-form-input rule-input",type:"text",pattern:"^[FG+\\-[\\]]*$",name:"ruleG",placeholder:"(optional)",defaultValue:i})),l.a.createElement("label",null,"\u03b8:",l.a.createElement("input",{key:r,ref:h,className:"fractal-form-input theta",type:"number",name:"theta",placeholder:"Enter an angle...",defaultValue:r})),l.a.createElement("div",{className:"sliders"},l.a.createElement("label",null,"Length:",l.a.createElement("input",{key:o,ref:f,className:"fractal-form-input",type:"range",name:"length",min:"100",max:"500",step:"25",defaultValue:o})),l.a.createElement("label",null,"Size:",l.a.createElement("input",{key:a,ref:m,className:"fractal-form-input",type:"range",name:"size",min:"1",max:"8",step:"1",defaultValue:a})),l.a.createElement("input",{type:"submit",className:"generate-btn",value:"\u2af7 Generate \u2af8"}))))))},N=function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),r=a[0],c=a[1];return!1===e.showModal?null:l.a.createElement("div",{className:"modal"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("form",{classname:"save-fractal-form",onSubmit:function(t){t.preventDefault(),e.saveFractal(r),c("")}},l.a.createElement("label",null,"Enter a name:",l.a.createElement("input",{type:"text",name:"name",placeholder:"name...",value:r,onChange:function(e){c(e.target.value)}})),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Save fractal"})),l.a.createElement("button",{onClick:e.handleModalClick},"-\ud835\udd4f-")))},G=function(e){return!1===e.showGuidanceModal?null:l.a.createElement("div",{className:"modal guidance"},l.a.createElement("div",{className:"modal-content guidance-content"},l.a.createElement("h3",{className:"guidance-header"},"Terms:"),l.a.createElement("p",null,l.a.createElement("b",null,"\u03b8 Theta: "),"This refers to the angle the lines turn."),l.a.createElement("p",null,l.a.createElement("b",null,"Length: "),"This refers to the initial length of the line segment. It decreases with each generation."),l.a.createElement("p",null,l.a.createElement("b",null,"Axiom: "),"This is the base rule."),l.a.createElement("p",null,l.a.createElement("b",null,"Ruleset F: "),"For each encounter of 'F', these instructions are appended."),l.a.createElement("p",null,l.a.createElement("b",null,"Ruleset G: "),"For each encounter of 'G', these instructions are appended."),l.a.createElement("h3",{className:"guidance-header"},"Rule Definitions:"),l.a.createElement("p",null,l.a.createElement("b",null,"F: "),"Move forward and draw a line."),l.a.createElement("p",null,l.a.createElement("b",null,"G: "),"Move forward, but do not draw a line."),l.a.createElement("p",null,l.a.createElement("b",null,"+: "),"Rotate at the angle defined by theta."),l.a.createElement("p",null,l.a.createElement("b",null,"-: "),"Rotate at the angle opposite of theta."),l.a.createElement("p",null,l.a.createElement("b",null,"[: "),"Save current state (push)"),l.a.createElement("p",null,l.a.createElement("b",null,"]: "),"Return to saved state (pop)"),l.a.createElement("h3",{className:"guidance-header"},"Some common branch designs:"),l.a.createElement("p",null,l.a.createElement("b",null,"\u03b8: "),"35"),l.a.createElement("p",null,l.a.createElement("b",null,"Axiom: "),"F"),l.a.createElement("p",null,l.a.createElement("b",null,"Ruleset F: "),"F[+FF][-FF]F[-F][+F]F"),l.a.createElement("br",null),l.a.createElement("p",null,l.a.createElement("b",null,"\u03b8: "),"22"),l.a.createElement("p",null,l.a.createElement("b",null,"Axiom: "),"G"),l.a.createElement("p",null,l.a.createElement("b",null,"Ruleset F: "),"FF"),l.a.createElement("p",null,l.a.createElement("b",null,"Ruleset G: "),"F-[[G]+G]+F[+FG]-G"),l.a.createElement("br",null),l.a.createElement("p",null,l.a.createElement("b",null,"\u03b8: "),"20"),l.a.createElement("p",null,l.a.createElement("b",null,"Axiom: "),"G"),l.a.createElement("p",null,l.a.createElement("b",null,"Ruleset F: "),"FF"),l.a.createElement("p",null,l.a.createElement("b",null,"Ruleset G: "),"F[+G]F[-G]+G"),l.a.createElement("button",{onClick:e.handleGuidanceModalClick},"-\ud835\udd4f-")))},O=function(e){var t=Object(n.useState)({axiom:"F",setF:"FF+[+F-F-F]-[-F+F+F]",setG:"",theta:20,initLen:200,n:1}),a=Object(d.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(),s=Object(d.a)(o,2),i=s[0],u=s[1],m=Object(n.useState)(!1),h=Object(d.a)(m,2),p=h[0],f=h[1],E=Object(n.useState)(!1),b=Object(d.a)(E,2),g=b[0],v=b[1],y=function(){f(!p)},w=function(){v(!g)};return l.a.createElement("div",null,l.a.createElement(F,{fractalParams:r,handleCanvasChange:function(e){u(e)}}),l.a.createElement("div",null,l.a.createElement("button",{onClick:w},"Need guidance?")),l.a.createElement(S,{fractalParams:r,handleFormSubmit:function(e,t,a,n,l,r,o){e.preventDefault(),c({axiom:n.current.value,setF:r.current.value,setG:o.current.value,theta:a.current.value,initLen:l.current.value,n:t.current.value})}}),l.a.createElement("div",{className:"fractal-buttons"},l.a.createElement("span",null,l.a.createElement("button",{onClick:y}," Save Fractal to Gallery \u2963"),l.a.createElement(N,{showModal:p,handleModalClick:y,saveFractal:function(t){f(!p);var a=i.toDataURL(),n=r.n,l=r.theta,c=r.axiom,o=r.initLen,s=r.setF,u=r.setG;fetch("https://everybody-loves-fractals.herokuapp.com/fractals",{method:"POST",headers:{"content-type":"application/json",Authorization:"bearer ".concat(e.token)},body:JSON.stringify({name:t,image:a,parameters:{theta:l,length:o,size:n,rules:{axiom:c,setF:s,setG:u}}})}).then((function(e){return e.json()})).then((function(t){t.message?alert(t.message):e.handleSaveFractal(t)}))}}),l.a.createElement(G,{showGuidanceModal:g,handleGuidanceModalClick:w}),l.a.createElement("a",{className:"download-link",href:"test",download:"fractal.png",onClick:function(e){var t=i.toDataURL();e.target.href=t}},"\u2965 Download as .PNG File "))))},R=function(e){return l.a.createElement("div",{className:"gallery"},l.a.createElement("h2",null,"Gallery"),l.a.createElement("div",{className:"fractal-card-container"},e.fractals.map((function(e){return l.a.createElement(E,{key:e.id,fractal:e,context:"gallery"})}))))},j=a(2),C=function(e){return 0===e.currentUser.id?l.a.createElement("ul",{className:"nav"},l.a.createElement("li",{className:"grow"},l.a.createElement(j.b,{to:"/about"},"About")),l.a.createElement("li",{className:"grow"},l.a.createElement(j.b,{to:"/",exact:!0},"Fractal Machine")),l.a.createElement("li",{className:"grow"},l.a.createElement(j.b,{to:"/gallery"},"Gallery")),l.a.createElement("li",{className:"grow"},l.a.createElement(j.b,{to:"/login"},"Login")),l.a.createElement("li",{className:"grow"},l.a.createElement(j.b,{to:"/register"},"Register"))):l.a.createElement("ul",{className:"nav"},l.a.createElement("li",{className:"grow"},l.a.createElement(j.b,{to:"/about"},"About")),l.a.createElement("li",{className:"grow"},l.a.createElement(j.b,{to:"/",exact:!0},"Fractal Machine")),l.a.createElement("li",{className:"grow"},l.a.createElement(j.b,{to:"/gallery"},"Gallery")),l.a.createElement("li",{className:"grow"},l.a.createElement(j.b,{to:"/profile"},"Profile")),l.a.createElement("li",{className:"grow"},l.a.createElement(j.b,{to:"/",onClick:e.handleLogOut},"Log Out")))},x=a(25),A=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={username:"",password:""},a.handleSubmit=function(e){e.preventDefault(),a.props.handleSubmit(a.state)},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(x.a)({},n,l))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.formName,t=this.state,a=t.username,n=t.password;return l.a.createElement("form",{className:"login-register-form",onSubmit:this.handleSubmit},l.a.createElement("h1",null,e),l.a.createElement("label",{htmlFor:"username"},"Username:",l.a.createElement("input",{type:"text",autoComplete:"off",name:"username",value:a,onChange:this.handleChange})),l.a.createElement("label",{htmlFor:"password"},"Password:",l.a.createElement("input",{type:"password",autoComplete:"off",name:"password",value:n,onChange:this.handleChange})),l.a.createElement("input",{type:"submit",value:"Submit"}))}}]),t}(n.Component),L=function(){return l.a.createElement("div",null,l.a.createElement("h3",null,"Page Not Found"))},D=function(){return l.a.createElement("div",{className:"footer"},l.a.createElement("p",null,"Made by ",l.a.createElement("a",{href:"https://github.com/rizz0s",target:"_blank",rel:"noopener noreferrer"},"@Summer")," and ",l.a.createElement("a",{href:"https://github.com/SeanWelshBrown",target:"_blank",rel:"noopener noreferrer"},"@Sean")," [Access Labs // Brooklyn, 2020] \u2661\u2665"))},B=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:{username:"",id:0},token:"",fractals:[]},a.handleResp=function(e){e.user?(localStorage.token=e.token,a.setState(e,(function(){"/login"!==a.props.history.location.pathname&&"/register"!==a.props.history.location.pathname||(console.log("hi"),a.props.history.push("/"))}))):alert(e.error)},a.handleLoginSubmit=function(e){return fetch("https://everybody-loves-fractals.herokuapp.com/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then(a.handleResp)},a.handleRegisterSubmit=function(e){fetch("https://everybody-loves-fractals.herokuapp.com/users",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then(a.handleResp)},a.handleLogOut=function(){localStorage.clear(),a.setState({user:{username:"",id:0},token:""},(function(){a.props.history.push("/")}))},a.handleSaveFractal=function(e){var t=a.state.fractals.slice();e.parameters=JSON.parse(e.parameters);var n=[].concat(Object(o.a)(t),[e]);a.setState({fractals:n},(function(){return console.log(a.state)}))},a.handleDeleteFractal=function(e){var t=a.state.fractals.filter((function(t){return t.id!==e}));a.setState({fractals:t})},a.renderForm=function(e){return"/login"===e.location.pathname?l.a.createElement(A,{formName:"Login Form",handleSubmit:a.handleLoginSubmit}):"/register"===e.location.pathname?l.a.createElement(A,{formName:"Register Form",handleSubmit:a.handleRegisterSubmit}):void 0},a.renderProfile=function(e){return l.a.createElement(g,{currentUser:a.state.user,token:a.state.token,fractals:a.state.fractals,handleDeleteFractal:a.handleDeleteFractal})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://everybody-loves-fractals.herokuapp.com/fractals").then((function(e){return e.json()})).then((function(t){if(t.length>0){var a=t.map((function(e){return e.parameters=JSON.parse(e.parameters),e}));e.setState({fractals:a})}})),localStorage.getItem("token")&&fetch("https://everybody-loves-fractals.herokuapp.com/persist",{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return e.json()})).then(this.handleResp)}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"navContainer"},l.a.createElement(C,{currentUser:this.state.user,handleLogOut:this.handleLogOut})),l.a.createElement("div",{className:"mainContent"},l.a.createElement(p.c,null,l.a.createElement(p.a,{path:"/login",render:this.renderForm}),l.a.createElement(p.a,{path:"/register",render:this.renderForm}),l.a.createElement(p.a,{path:"/about",component:v}),l.a.createElement(p.a,{path:"/gallery"},l.a.createElement(R,{fractals:this.state.fractals})),l.a.createElement(p.a,{path:"/profile",render:this.renderProfile}),l.a.createElement(p.a,{path:"/",exact:!0},l.a.createElement(O,{token:this.state.token,handleSaveFractal:this.handleSaveFractal})),l.a.createElement(p.a,{component:L}))),l.a.createElement(D,null))}}]),t}(l.a.Component),P=Object(p.f)(B);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(j.a,null,l.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.6393b972.chunk.js.map